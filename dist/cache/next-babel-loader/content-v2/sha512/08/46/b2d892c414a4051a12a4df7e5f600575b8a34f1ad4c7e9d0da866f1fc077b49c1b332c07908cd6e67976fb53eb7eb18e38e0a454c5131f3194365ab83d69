{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\didi\\\\Desktop\\\\frontend.ro\\\\client\\\\components\\\\Settings\\\\components\\\\ChangeEmail.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Form, { FormGroup, PasswordReveal } from '~/components/Form';\nimport SweetAlertService from '~/services/sweet-alert/SweetAlert.service';\nimport UserService from '~/services/User.service';\n\nfunction ChangeEmail({\n  onSuccess\n}) {\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const {\n    0: isChanging,\n    1: setIsChanging\n  } = useState(false);\n\n  const onSubmit = async form => {\n    const {\n      newEmail,\n      passwordConfirm\n    } = form;\n    setIsChanging(true);\n    let shouldResetForm = true;\n\n    try {\n      const updatedUser = await UserService.updateEmail({\n        email: newEmail,\n        password: passwordConfirm\n      });\n      SweetAlertService.toast({\n        type: 'success',\n        text: 'Email-ul a fost schimbat cu succes!'\n      });\n      onSuccess(updatedUser);\n    } catch (err) {\n      shouldResetForm = false;\n      setError(err.message || 'Nu am putut să-ți schimbăm email-ul. Încearcă din nou!');\n    } finally {\n      setIsChanging(false);\n    }\n\n    return shouldResetForm;\n  };\n\n  return __jsx(Form, {\n    onInput: () => setError(null),\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(\"h3\", {\n    className: \"mt-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, \"Schimb\\u0103 email-ul\"), __jsx(\"div\", {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, __jsx(FormGroup, {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, \"Noul email*\"), __jsx(\"input\", {\n    type: \"email\",\n    name: \"newEmail\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }))), __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, \"Parola*\"), __jsx(PasswordReveal, {\n    required: true,\n    autoComplete: \"new-password\",\n    name: \"passwordConfirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }))), error && __jsx(\"p\", {\n    className: \"text-red text-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, error)), __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isChanging,\n    className: `btn btn--blue ${isChanging ? 'btn--loading' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Schimb\\u0103 email-ul\")));\n}\n\nexport default ChangeEmail;","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/components/Settings/components/ChangeEmail.tsx"],"names":["React","useState","Form","FormGroup","PasswordReveal","SweetAlertService","UserService","ChangeEmail","onSuccess","error","setError","isChanging","setIsChanging","onSubmit","form","newEmail","passwordConfirm","shouldResetForm","updatedUser","updateEmail","email","password","toast","type","text","err","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Form, { FormGroup, PasswordReveal } from '~/components/Form';\r\nimport SweetAlertService from '~/services/sweet-alert/SweetAlert.service';\r\nimport UserService from '~/services/User.service';\r\n\r\ninterface Props {\r\n  onSuccess: (updatedUser: any) => void;\r\n}\r\n\r\nfunction ChangeEmail({ onSuccess }: Props) {\r\n  const [error, setError] = useState(null);\r\n  const [isChanging, setIsChanging] = useState(false);\r\n\r\n  const onSubmit = async (form) => {\r\n    const { newEmail, passwordConfirm } = form;\r\n\r\n    setIsChanging(true);\r\n    let shouldResetForm = true;\r\n\r\n    try {\r\n      const updatedUser = await UserService.updateEmail({\r\n        email: newEmail,\r\n        password: passwordConfirm,\r\n      });\r\n\r\n      SweetAlertService.toast({\r\n        type: 'success',\r\n        text: 'Email-ul a fost schimbat cu succes!',\r\n      });\r\n\r\n      onSuccess(updatedUser);\r\n    } catch (err) {\r\n      shouldResetForm = false;\r\n      setError(err.message || 'Nu am putut să-ți schimbăm email-ul. Încearcă din nou!');\r\n    } finally {\r\n      setIsChanging(false);\r\n    }\r\n\r\n    return shouldResetForm;\r\n  };\r\n\r\n  return (\r\n    <Form onInput={() => setError(null)} onSubmit={onSubmit}>\r\n      <h3 className=\"mt-0\">Schimbă email-ul</h3>\r\n      <div className=\"d-flex justify-content-between align-items-center\">\r\n        <div>\r\n          <FormGroup className=\"mb-4\">\r\n            <label>\r\n              <span className=\"label\">\r\n                Noul email*\r\n              </span>\r\n              <input type=\"email\" name=\"newEmail\" required />\r\n            </label>\r\n          </FormGroup>\r\n\r\n          <FormGroup>\r\n            <label>\r\n              <span className=\"label\">\r\n                Parola*\r\n              </span>\r\n              <PasswordReveal required autoComplete=\"new-password\" name=\"passwordConfirm\" />\r\n            </label>\r\n          </FormGroup>\r\n          {error && (\r\n            <p className=\"text-red text-bold\">\r\n              {error}\r\n            </p>\r\n          )}\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isChanging}\r\n          className={`btn btn--blue ${isChanging ? 'btn--loading' : ''}`}\r\n        >\r\n          Schimbă email-ul\r\n        </button>\r\n      </div>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default ChangeEmail;\r\n"]},"metadata":{},"sourceType":"module"}