{"ast":null,"code":"import _classCallCheck from \"C:/Users/didi/Desktop/frontend.ro/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _defineProperty from \"C:/Users/didi/Desktop/frontend.ro/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\n/* eslint-disable no-restricted-globals */\nexport var LogEventType;\n\n(function (LogEventType) {\n  LogEventType[\"ROUTE\"] = \"ROUTE\";\n  LogEventType[\"END\"] = \"END\";\n})(LogEventType || (LogEventType = {}));\n\nvar ClientMonitoring = function ClientMonitoring() {\n  _classCallCheck(this, ClientMonitoring);\n};\n\n_defineProperty(ClientMonitoring, \"endpoint\", 'https://frontendro-default-rtdb.firebaseio.com/logs.json');\n\n_defineProperty(ClientMonitoring, \"log\", function (type) {\n  var log = {\n    type: type,\n    url: location.pathname,\n    timestamp: new Date().toString()\n  };\n  return fetch(ClientMonitoring.endpoint, {\n    method: 'POST',\n    body: JSON.stringify(log),\n    headers: new Headers({\n      'Content-Type': 'application/json'\n    })\n  })[\"catch\"](function (err) {\n    console.error('[ClientMonitoring.log]', err);\n  });\n});\n\n_defineProperty(ClientMonitoring, \"destroy\", function () {\n  var log = {\n    type: LogEventType.END,\n    url: location.pathname,\n    timestamp: new Date().toString()\n  };\n  navigator.sendBeacon(ClientMonitoring.endpoint, JSON.stringify(log));\n});\n\nexport default ClientMonitoring;","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/services/ClientMonitoring.ts"],"names":["LogEventType","ClientMonitoring","type","log","url","location","pathname","timestamp","Date","toString","fetch","endpoint","method","body","JSON","stringify","headers","Headers","err","console","error","END","navigator","sendBeacon"],"mappings":";;;AAAA;AACA,WAAYA,YAAZ;;WAAYA,Y;AAAAA,EAAAA,Y;AAAAA,EAAAA,Y;GAAAA,Y,KAAAA,Y;;IAWNC,gB;;;;gBAAAA,gB,cACsB,0D;;gBADtBA,gB,SAGgB,UAACC,IAAD,EAAwB;AAC1C,MAAMC,GAAS,GAAG;AAChBD,IAAAA,IAAI,EAAJA,IADgB;AAEhBE,IAAAA,GAAG,EAAEC,QAAQ,CAACC,QAFE;AAGhBC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,QAAX;AAHK,GAAlB;AAMA,SAAOC,KAAK,CAACT,gBAAgB,CAACU,QAAlB,EAA4B;AACtCC,IAAAA,MAAM,EAAE,MAD8B;AAEtCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeZ,GAAf,CAFgC;AAGtCa,IAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,sBAAgB;AADG,KAAZ;AAH6B,GAA5B,CAAL,UAOE,UAACC,GAAD,EAAS;AACdC,IAAAA,OAAO,CAACC,KAAR,CAAc,wBAAd,EAAwCF,GAAxC;AACD,GATI,CAAP;AAUD,C;;gBApBGjB,gB,aAsBoB,YAAM;AAC5B,MAAME,GAAS,GAAG;AAChBD,IAAAA,IAAI,EAAEF,YAAY,CAACqB,GADH;AAEhBjB,IAAAA,GAAG,EAAEC,QAAQ,CAACC,QAFE;AAGhBC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,QAAX;AAHK,GAAlB;AAMAa,EAAAA,SAAS,CAACC,UAAV,CAAqBtB,gBAAgB,CAACU,QAAtC,EAAgDG,IAAI,CAACC,SAAL,CAAeZ,GAAf,CAAhD;AACD,C;;AAGH,eAAeF,gBAAf","sourcesContent":["/* eslint-disable no-restricted-globals */\r\nexport enum LogEventType {\r\n  ROUTE = 'ROUTE',\r\n  END = 'END',\r\n}\r\n\r\ninterface Log {\r\n  url: string;\r\n  type: LogEventType;\r\n  timestamp: string;\r\n}\r\n\r\nclass ClientMonitoring {\r\n  private static endpoint = 'https://frontendro-default-rtdb.firebaseio.com/logs.json'\r\n\r\n  public static log = (type: LogEventType) => {\r\n    const log : Log = {\r\n      type,\r\n      url: location.pathname,\r\n      timestamp: new Date().toString(),\r\n    };\r\n\r\n    return fetch(ClientMonitoring.endpoint, {\r\n      method: 'POST',\r\n      body: JSON.stringify(log),\r\n      headers: new Headers({\r\n        'Content-Type': 'application/json',\r\n      }),\r\n    })\r\n      .catch((err) => {\r\n        console.error('[ClientMonitoring.log]', err);\r\n      });\r\n  }\r\n\r\n  public static destroy = () => {\r\n    const log : Log = {\r\n      type: LogEventType.END,\r\n      url: location.pathname,\r\n      timestamp: new Date().toString(),\r\n    };\r\n\r\n    navigator.sendBeacon(ClientMonitoring.endpoint, JSON.stringify(log));\r\n  }\r\n}\r\n\r\nexport default ClientMonitoring;\r\n"]},"metadata":{},"sourceType":"module"}