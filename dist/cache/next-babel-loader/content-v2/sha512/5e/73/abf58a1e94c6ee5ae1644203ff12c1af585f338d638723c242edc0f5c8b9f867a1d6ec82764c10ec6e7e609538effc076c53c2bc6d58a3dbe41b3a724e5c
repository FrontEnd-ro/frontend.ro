{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\didi\\\\Desktop\\\\frontend.ro\\\\client\\\\components\\\\SubscribeForm\\\\SubscribeForm.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport UserService from '~/services/User.service';\nimport styles from './SubscribeForm.module.scss';\n\nfunction SubscribeForm({\n  userInfo\n}) {\n  const {\n    0: didSubscribe,\n    1: setDidSubscribe\n  } = useState(false);\n  const {\n    0: isSubscribing,\n    1: setIsSubscribing\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const ROBOT_STRING = 'frontend.ro';\n\n  const submit = e => {\n    e.preventDefault();\n    e.persist();\n    const formEl = e.target;\n\n    if (!formEl.checkValidity()) {\n      return;\n    }\n\n    if (formEl['robot-check'].value !== ROBOT_STRING) {\n      setError('Hmm...ești robot cumva? 🤔');\n      return;\n    }\n\n    setError(null);\n    setIsSubscribing(true);\n    let body = {\n      name: formEl.name.value,\n      email: formEl.email.value\n    };\n    /** Subscribing in a different database until we set ours up */\n\n    UserService.subscribe(body).then(() => {\n      setDidSubscribe(true);\n    }).catch(err => {\n      setIsSubscribing(false);\n      setError(err.message || 'Oups, ceva a mers greșit. Dă-mi un semn ca să pot rezolva problema :)');\n    });\n  };\n\n  return __jsx(\"form\", {\n    onSubmit: submit,\n    className: `${styles.form} my-5 text-center`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Cum s\\u0103-\\u021Bi spunem?\"), userInfo && __jsx(\"input\", {\n    disabled: isSubscribing,\n    value: userInfo.name,\n    type: \"text\",\n    name: \"name\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 22\n    }\n  })), __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \"Email\"), userInfo && __jsx(\"input\", {\n    disabled: isSubscribing,\n    value: userInfo.email,\n    type: \"email\",\n    name: \"email\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 22\n    }\n  })), __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Ca s\\u0103 ne asigur\\u0103m c\\u0103 nu e\\u0219ti robot,\", ' ', __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }), ' ', \"scrie mai jos\", ' ', __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, ROBOT_STRING)), __jsx(\"input\", {\n    disabled: isSubscribing,\n    type: \"text\",\n    name: \"robot-check\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  })), error && __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, ' ', \"\\u274C\", error), didSubscribe ? __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \" \\u2714 Bine ai venit \\xEEn comunitate!\") : __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isSubscribing,\n    className: `btn btn--light w-100${isSubscribing ? ' btn--loading' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Aboneaz\\u0103-te!\"));\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userInfo: state.user.info\n  };\n}\n\nconst connector = connect(mapStateToProps);\nexport default connector(SubscribeForm);","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/components/SubscribeForm/SubscribeForm.tsx"],"names":["React","useState","connect","UserService","styles","SubscribeForm","userInfo","didSubscribe","setDidSubscribe","isSubscribing","setIsSubscribing","error","setError","ROBOT_STRING","submit","e","preventDefault","persist","formEl","target","checkValidity","value","body","name","email","subscribe","then","catch","err","message","form","mapStateToProps","state","user","info","connector"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport UserService from '~/services/User.service';\r\nimport { RootState } from '~/redux/root.reducer';\r\n\r\nimport styles from './SubscribeForm.module.scss';\r\n\r\nfunction SubscribeForm({ userInfo }: ConnectedProps<typeof connector>) {\r\n  const [didSubscribe, setDidSubscribe] = useState(false);\r\n  const [isSubscribing, setIsSubscribing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const ROBOT_STRING = 'frontend.ro';\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    e.persist();\r\n\r\n    const formEl = e.target;\r\n\r\n    if (!formEl.checkValidity()) {\r\n      return;\r\n    }\r\n\r\n    if (formEl['robot-check'].value !== ROBOT_STRING) {\r\n      setError('Hmm...ești robot cumva? 🤔');\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    setIsSubscribing(true);\r\n\r\n    let body = {\r\n      name: formEl.name.value,\r\n      email: formEl.email.value,\r\n    };\r\n\r\n    /** Subscribing in a different database until we set ours up */\r\n    UserService.subscribe(body)\r\n      .then(() => {\r\n        setDidSubscribe(true);\r\n      })\r\n      .catch((err) => {\r\n        setIsSubscribing(false);\r\n        setError(err.message || 'Oups, ceva a mers greșit. Dă-mi un semn ca să pot rezolva problema :)');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submit} className={`${styles.form} my-5 text-center`}>\r\n      <label>\r\n        <span className=\"m-0\">Cum să-ți spunem?</span>\r\n        {userInfo && <input disabled={isSubscribing} value={userInfo.name} type=\"text\" name=\"name\" required />}\r\n      </label>\r\n      <label>\r\n        <span className=\"m-0\">Email</span>\r\n        {userInfo && <input disabled={isSubscribing} value={userInfo.email} type=\"email\" name=\"email\" required />}\r\n      </label>\r\n      <label>\r\n        <span className=\"mb-2\">\r\n          Ca să ne asigurăm că nu ești robot,\r\n          {' '}\r\n          <br />\r\n          {' '}\r\n          scrie mai jos\r\n          {' '}\r\n          <strong>{ROBOT_STRING}</strong>\r\n        </span>\r\n        <input disabled={isSubscribing} type=\"text\" name=\"robot-check\" required />\r\n      </label>\r\n      {error && (\r\n        <p>\r\n          {' '}\r\n          ❌\r\n          {error}\r\n        </p>\r\n      )}\r\n      {didSubscribe\r\n        ? <p> ✔ Bine ai venit în comunitate!</p>\r\n        : (\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubscribing}\r\n            className={`btn btn--light w-100${isSubscribing ? ' btn--loading' : ''}`}\r\n          >\r\n            Abonează-te!\r\n          </button>\r\n        )}\r\n\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: RootState) {\r\n  return {\r\n    userInfo: state.user.info,\r\n  };\r\n}\r\n\r\nconst connector = connect(mapStateToProps);\r\n\r\nexport default connector(SubscribeForm);\r\n"]},"metadata":{},"sourceType":"module"}