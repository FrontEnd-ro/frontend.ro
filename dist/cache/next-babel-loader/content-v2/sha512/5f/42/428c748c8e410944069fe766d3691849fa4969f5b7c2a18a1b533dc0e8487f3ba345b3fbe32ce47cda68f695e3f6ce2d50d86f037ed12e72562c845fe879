{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/didi/Desktop/frontend.ro/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/didi/Desktop/frontend.ro/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\didi\\\\Desktop\\\\frontend.ro\\\\client\\\\components\\\\Settings\\\\components\\\\ChangeDescription.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Form, { FormGroup, PasswordReveal } from '~/components/Form';\nimport SweetAlertService from '~/services/sweet-alert/SweetAlert.service';\nimport UserService from '~/services/User.service';\n\nfunction ChangeDescription(_ref) {\n  _s();\n\n  var onSuccess = _ref.onSuccess;\n\n  var _useState = useState(null),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var _useState2 = useState(false),\n      isChanging = _useState2[0],\n      setIsChanging = _useState2[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(form) {\n      var newDescription, passwordConfirm, shouldResetForm, updatedUser;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              newDescription = form.newDescription, passwordConfirm = form.passwordConfirm;\n              setIsChanging(true);\n              shouldResetForm = true;\n              _context.prev = 3;\n              _context.next = 6;\n              return UserService.updateDescription({\n                description: newDescription,\n                password: passwordConfirm\n              });\n\n            case 6:\n              updatedUser = _context.sent;\n              SweetAlertService.toast({\n                type: 'success',\n                text: 'Descrierea a fost schimbată cu succes!'\n              });\n              onSuccess(updatedUser);\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](3);\n              shouldResetForm = false;\n              setError(_context.t0.message || 'Nu am putut să-ți schimbăm descrierea. Încearcă din nou!');\n\n            case 15:\n              _context.prev = 15;\n              setIsChanging(false);\n              return _context.finish(15);\n\n            case 18:\n              return _context.abrupt(\"return\", shouldResetForm);\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 11, 15, 18]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Form, {\n    onInput: function onInput() {\n      return setError(null);\n    },\n    autoComplete: \"off\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, __jsx(\"h3\", {\n    className: \"mt-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, \"Schimb\\u0103 descrierea\"), __jsx(\"div\", {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    id: \"change-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, __jsx(FormGroup, {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, \"Noua descriere*\"), __jsx(\"textarea\", {\n    cols: 40,\n    rows: 5,\n    name: \"newDescription\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }))), __jsx(FormGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, \"Parola*\"), __jsx(PasswordReveal, {\n    required: true,\n    autoComplete: \"new-password\",\n    name: \"passwordConfirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }))), error && __jsx(\"p\", {\n    className: \"text-red text-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"\\u274C\", ' ', error)), __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isChanging,\n    className: \"btn btn--blue \".concat(isChanging ? 'btn--loading' : ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"Schimb\\u0103 descrierea\")));\n}\n\n_s(ChangeDescription, \"hSF/JMVgNAfSoh60QW7Svo7w5yo=\");\n\n_c = ChangeDescription;\nexport default ChangeDescription;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangeDescription\");","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/components/Settings/components/ChangeDescription.tsx"],"names":["React","useState","Form","FormGroup","PasswordReveal","SweetAlertService","UserService","ChangeDescription","onSuccess","error","setError","isChanging","setIsChanging","onSubmit","form","newDescription","passwordConfirm","shouldResetForm","updateDescription","description","password","updatedUser","toast","type","text","message"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Form, { FormGroup, PasswordReveal } from '~/components/Form';\r\nimport SweetAlertService from '~/services/sweet-alert/SweetAlert.service';\r\nimport UserService from '~/services/User.service';\r\n\r\ninterface Props {\r\n  onSuccess: (user: any) => void;\r\n}\r\n\r\nfunction ChangeDescription({ onSuccess }: Props) {\r\n  const [error, setError] = useState(null);\r\n  const [isChanging, setIsChanging] = useState(false);\r\n\r\n  const onSubmit = async (form) => {\r\n    const { newDescription, passwordConfirm } = form;\r\n\r\n    setIsChanging(true);\r\n    let shouldResetForm = true;\r\n\r\n    try {\r\n      const updatedUser = await UserService.updateDescription({\r\n        description: newDescription,\r\n        password: passwordConfirm,\r\n      });\r\n\r\n      SweetAlertService.toast({\r\n        type: 'success',\r\n        text: 'Descrierea a fost schimbată cu succes!',\r\n      });\r\n\r\n      onSuccess(updatedUser);\r\n    } catch (err) {\r\n      shouldResetForm = false;\r\n      setError(err.message || 'Nu am putut să-ți schimbăm descrierea. Încearcă din nou!');\r\n    } finally {\r\n      setIsChanging(false);\r\n    }\r\n\r\n    return shouldResetForm;\r\n  };\r\n\r\n  return (\r\n    <Form onInput={() => setError(null)} autoComplete=\"off\" onSubmit={onSubmit}>\r\n      <h3 className=\"mt-0\">Schimbă descrierea</h3>\r\n      <div className=\"d-flex justify-content-between align-items-center\">\r\n        <div id=\"change-description\">\r\n          <FormGroup className=\"mb-4\">\r\n            <label>\r\n              <span className=\"label\">\r\n                Noua descriere*\r\n              </span>\r\n              <textarea cols={40} rows={5} name=\"newDescription\" required />\r\n            </label>\r\n          </FormGroup>\r\n\r\n          <FormGroup>\r\n            <label>\r\n              <span className=\"label\">\r\n                Parola*\r\n              </span>\r\n              <PasswordReveal required autoComplete=\"new-password\" name=\"passwordConfirm\" />\r\n            </label>\r\n          </FormGroup>\r\n          {error && (\r\n            <p className=\"text-red text-bold\">\r\n              ❌\r\n              {' '}\r\n              {error}\r\n            </p>\r\n          )}\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isChanging}\r\n          className={`btn btn--blue ${isChanging ? 'btn--loading' : ''}`}\r\n        >\r\n          Schimbă descrierea\r\n        </button>\r\n      </div>\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default ChangeDescription;\r\n"]},"metadata":{},"sourceType":"module"}