{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\didi\\\\Desktop\\\\frontend.ro\\\\client\\\\components\\\\SubscribeForm\\\\SubscribeForm.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport UserService from '~/services/User.service';\nimport styles from './SubscribeForm.module.scss';\n\nfunction SubscribeForm(_ref) {\n  _s();\n\n  var userInfo = _ref.userInfo;\n\n  var _useState = useState(false),\n      didSubscribe = _useState[0],\n      setDidSubscribe = _useState[1];\n\n  var _useState2 = useState(false),\n      isSubscribing = _useState2[0],\n      setIsSubscribing = _useState2[1];\n\n  var _useState3 = useState(null),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var ROBOT_STRING = 'frontend.ro';\n\n  var submit = function submit(e) {\n    e.preventDefault();\n    e.persist();\n    var formEl = e.target;\n\n    if (!formEl.checkValidity()) {\n      return;\n    }\n\n    if (formEl['robot-check'].value !== ROBOT_STRING) {\n      setError('Hmm...ești robot cumva? 🤔');\n      return;\n    }\n\n    setError(null);\n    setIsSubscribing(true);\n    var body = {\n      name: formEl.name.value,\n      email: formEl.email.value\n    };\n    /** Subscribing in a different database until we set ours up */\n\n    UserService.subscribe(body).then(function () {\n      setDidSubscribe(true);\n    })[\"catch\"](function (err) {\n      setIsSubscribing(false);\n      setError(err.message || 'Oups, ceva a mers greșit. Dă-mi un semn ca să pot rezolva problema :)');\n    });\n  };\n\n  return __jsx(\"form\", {\n    onSubmit: submit,\n    className: \"\".concat(styles.form, \" my-5 text-center\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"Cum s\\u0103-\\u021Bi spunem?\"), userInfo && __jsx(\"input\", {\n    disabled: isSubscribing,\n    value: userInfo.name,\n    type: \"text\",\n    name: \"name\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 22\n    }\n  })), __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, \"Email\"), __jsx(\"input\", {\n    disabled: isSubscribing,\n    type: \"email\",\n    name: \"email\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  })), __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, __jsx(\"span\", {\n    className: \"mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, \"Ca s\\u0103 ne asigur\\u0103m c\\u0103 nu e\\u0219ti robot,\", ' ', __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }), ' ', \"scrie mai jos\", ' ', __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, ROBOT_STRING)), __jsx(\"input\", {\n    disabled: isSubscribing,\n    type: \"text\",\n    name: \"robot-check\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  })), error && __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, ' ', \"\\u274C\", error), didSubscribe ? __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \" \\u2714 Bine ai venit \\xEEn comunitate!\") : __jsx(\"button\", {\n    type: \"submit\",\n    disabled: isSubscribing,\n    className: \"btn btn--light w-100\".concat(isSubscribing ? ' btn--loading' : ''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"Aboneaz\\u0103-te!\"));\n}\n\n_s(SubscribeForm, \"nViSexPz+ufW6rJueQqV5+cKu1Q=\");\n\n_c = SubscribeForm;\n\nfunction mapStateToProps(state) {\n  return {\n    userInfo: state.user.info\n  };\n}\n\nvar connector = connect(mapStateToProps);\nexport default _c2 = connector(SubscribeForm);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SubscribeForm\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/components/SubscribeForm/SubscribeForm.tsx"],"names":["React","useState","connect","UserService","styles","SubscribeForm","userInfo","didSubscribe","setDidSubscribe","isSubscribing","setIsSubscribing","error","setError","ROBOT_STRING","submit","e","preventDefault","persist","formEl","target","checkValidity","value","body","name","email","subscribe","then","err","message","form","mapStateToProps","state","user","info","connector"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,OAAT,QAAwC,aAAxC;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AAGA,OAAOC,MAAP,MAAmB,6BAAnB;;AAEA,SAASC,aAAT,OAAuE;AAAA;;AAAA,MAA9CC,QAA8C,QAA9CA,QAA8C;;AAAA,kBAC7BL,QAAQ,CAAC,KAAD,CADqB;AAAA,MAC9DM,YAD8D;AAAA,MAChDC,eADgD;;AAAA,mBAE3BP,QAAQ,CAAC,KAAD,CAFmB;AAAA,MAE9DQ,aAF8D;AAAA,MAE/CC,gBAF+C;;AAAA,mBAG3CT,QAAQ,CAAC,IAAD,CAHmC;AAAA,MAG9DU,KAH8D;AAAA,MAGvDC,QAHuD;;AAKrE,MAAMC,YAAY,GAAG,aAArB;;AACA,MAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AACpBA,IAAAA,CAAC,CAACC,cAAF;AACAD,IAAAA,CAAC,CAACE,OAAF;AAEA,QAAMC,MAAM,GAAGH,CAAC,CAACI,MAAjB;;AAEA,QAAI,CAACD,MAAM,CAACE,aAAP,EAAL,EAA6B;AAC3B;AACD;;AAED,QAAIF,MAAM,CAAC,aAAD,CAAN,CAAsBG,KAAtB,KAAgCR,YAApC,EAAkD;AAChDD,MAAAA,QAAQ,CAAC,4BAAD,CAAR;AACA;AACD;;AAEDA,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAF,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AAEA,QAAIY,IAAI,GAAG;AACTC,MAAAA,IAAI,EAAEL,MAAM,CAACK,IAAP,CAAYF,KADT;AAETG,MAAAA,KAAK,EAAEN,MAAM,CAACM,KAAP,CAAaH;AAFX,KAAX;AAKA;;AACAlB,IAAAA,WAAW,CAACsB,SAAZ,CAAsBH,IAAtB,EACGI,IADH,CACQ,YAAM;AACVlB,MAAAA,eAAe,CAAC,IAAD,CAAf;AACD,KAHH,WAIS,UAACmB,GAAD,EAAS;AACdjB,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAE,MAAAA,QAAQ,CAACe,GAAG,CAACC,OAAJ,IAAe,uEAAhB,CAAR;AACD,KAPH;AAQD,GAhCD;;AAkCA,SACE;AAAM,IAAA,QAAQ,EAAEd,MAAhB;AAAwB,IAAA,SAAS,YAAKV,MAAM,CAACyB,IAAZ,sBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADF,EAEGvB,QAAQ,IAAI;AAAO,IAAA,QAAQ,EAAEG,aAAjB;AAAgC,IAAA,KAAK,EAAEH,QAAQ,CAACiB,IAAhD;AAAsD,IAAA,IAAI,EAAC,MAA3D;AAAkE,IAAA,IAAI,EAAC,MAAvE;AAA8E,IAAA,QAAQ,MAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFf,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE;AAAO,IAAA,QAAQ,EAAEd,aAAjB;AAAgC,IAAA,IAAI,EAAC,OAArC;AAA6C,IAAA,IAAI,EAAC,OAAlD;AAA0D,IAAA,QAAQ,MAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CANF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAEG,GAFH,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIG,GAJH,mBAMG,GANH,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASI,YAAT,CAPF,CADF,EAUE;AAAO,IAAA,QAAQ,EAAEJ,aAAjB;AAAgC,IAAA,IAAI,EAAC,MAArC;AAA4C,IAAA,IAAI,EAAC,aAAjD;AAA+D,IAAA,QAAQ,MAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CAVF,EAsBGE,KAAK,IACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,GADH,YAGGA,KAHH,CAvBJ,EA6BGJ,YAAY,GACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADS,GAGT;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,QAAQ,EAAEE,aAFZ;AAGE,IAAA,SAAS,gCAAyBA,aAAa,GAAG,eAAH,GAAqB,EAA3D,CAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAhCN,CADF;AA4CD;;GApFQJ,a;;KAAAA,a;;AAsFT,SAASyB,eAAT,CAAyBC,KAAzB,EAA2C;AACzC,SAAO;AACLzB,IAAAA,QAAQ,EAAEyB,KAAK,CAACC,IAAN,CAAWC;AADhB,GAAP;AAGD;;AAED,IAAMC,SAAS,GAAGhC,OAAO,CAAC4B,eAAD,CAAzB;AAEA,qBAAeI,SAAS,CAAC7B,aAAD,CAAxB","sourcesContent":["import React, { useState } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport UserService from '~/services/User.service';\r\nimport { RootState } from '~/redux/root.reducer';\r\n\r\nimport styles from './SubscribeForm.module.scss';\r\n\r\nfunction SubscribeForm({ userInfo }: ConnectedProps<typeof connector>) {\r\n  const [didSubscribe, setDidSubscribe] = useState(false);\r\n  const [isSubscribing, setIsSubscribing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const ROBOT_STRING = 'frontend.ro';\r\n  const submit = (e) => {\r\n    e.preventDefault();\r\n    e.persist();\r\n\r\n    const formEl = e.target;\r\n\r\n    if (!formEl.checkValidity()) {\r\n      return;\r\n    }\r\n\r\n    if (formEl['robot-check'].value !== ROBOT_STRING) {\r\n      setError('Hmm...ești robot cumva? 🤔');\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    setIsSubscribing(true);\r\n\r\n    let body = {\r\n      name: formEl.name.value,\r\n      email: formEl.email.value,\r\n    };\r\n\r\n    /** Subscribing in a different database until we set ours up */\r\n    UserService.subscribe(body)\r\n      .then(() => {\r\n        setDidSubscribe(true);\r\n      })\r\n      .catch((err) => {\r\n        setIsSubscribing(false);\r\n        setError(err.message || 'Oups, ceva a mers greșit. Dă-mi un semn ca să pot rezolva problema :)');\r\n      });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submit} className={`${styles.form} my-5 text-center`}>\r\n      <label>\r\n        <span className=\"m-0\">Cum să-ți spunem?</span>\r\n        {userInfo && <input disabled={isSubscribing} value={userInfo.name} type=\"text\" name=\"name\" required />}\r\n\r\n      </label>\r\n      <label>\r\n        <span className=\"m-0\">Email</span>\r\n        <input disabled={isSubscribing} type=\"email\" name=\"email\" required />\r\n      </label>\r\n      <label>\r\n        <span className=\"mb-2\">\r\n          Ca să ne asigurăm că nu ești robot,\r\n          {' '}\r\n          <br />\r\n          {' '}\r\n          scrie mai jos\r\n          {' '}\r\n          <strong>{ROBOT_STRING}</strong>\r\n        </span>\r\n        <input disabled={isSubscribing} type=\"text\" name=\"robot-check\" required />\r\n      </label>\r\n      {error && (\r\n        <p>\r\n          {' '}\r\n          ❌\r\n          {error}\r\n        </p>\r\n      )}\r\n      {didSubscribe\r\n        ? <p> ✔ Bine ai venit în comunitate!</p>\r\n        : (\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubscribing}\r\n            className={`btn btn--light w-100${isSubscribing ? ' btn--loading' : ''}`}\r\n          >\r\n            Abonează-te!\r\n          </button>\r\n        )}\r\n\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: RootState) {\r\n  return {\r\n    userInfo: state.user.info,\r\n  };\r\n}\r\n\r\nconst connector = connect(mapStateToProps);\r\n\r\nexport default connector(SubscribeForm);\r\n"]},"metadata":{},"sourceType":"module"}