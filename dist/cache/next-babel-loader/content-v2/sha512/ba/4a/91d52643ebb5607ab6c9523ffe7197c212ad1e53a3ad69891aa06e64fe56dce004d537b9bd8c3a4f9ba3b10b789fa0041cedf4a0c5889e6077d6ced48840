{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\didi\\\\Desktop\\\\frontend.ro\\\\client\\\\components\\\\user-profile\\\\UserActivity\\\\UserActivity.tsx\";\nvar __jsx = React.createElement;\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Link from 'next/link';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport ExercisePreview from '~/components/ExercisePreview';\nimport PageContainer from '~/components/PageContainer';\nimport ExerciseService from '~/services/Exercise.service';\nimport NoActivity from '../NoActivity/NoActivity';\nimport { SUBMISSION_STATUS } from '~/../shared/SharedConstants';\nimport styles from './UserActivity.module.scss';\n\nfunction UserActivity({\n  profileUser,\n  currentUser\n}) {\n  const isOwnProfile = currentUser.info && currentUser.info.username === profileUser.username;\n  const {\n    0: solvedExercises,\n    1: setSolvedExercises\n  } = useState(undefined);\n  const {\n    0: createdExercises,\n    1: setCreatedExercises\n  } = useState(undefined);\n  useEffect(() => {\n    // Solved exercises\n    if (isOwnProfile) {\n      ExerciseService.getSolvedExercises().then(resp => setSolvedExercises(resp)).catch(err => console.error(err));\n    } else {\n      setSolvedExercises([]);\n    } // Created exercises\n\n\n    const createdExercisesPromise = isOwnProfile ? ExerciseService.getCreatedExercises() : ExerciseService.getPublicCreatedExercises(profileUser.username);\n    createdExercisesPromise.then(resp => {\n      setCreatedExercises(resp);\n    }).catch(err => {\n      console.error(err);\n    });\n  }, []);\n\n  if (!createdExercises || !solvedExercises) {\n    // Loading\n    return null;\n  }\n\n  if (createdExercises.length === 0 && !isOwnProfile) {\n    return __jsx(NoActivity, {\n      user: profileUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return __jsx(PageContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, \"Exerci\\u021Bii rezolvate\"), __jsx(\"div\", {\n    className: styles['exercises-wrapper'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, solvedExercises.map((submission, index) => __jsx(ExercisePreview, {\n    key: submission._id,\n    exercise: submission.exercise,\n    href: `rezolva/${submission.exercise._id}`,\n    viewMode: \"STUDENT\",\n    feedbackCount: submission.feedbacks.filter(f => f.type === 'improvement').length,\n    isApproved: submission.status === SUBMISSION_STATUS.DONE,\n    readOnly: [SUBMISSION_STATUS.AWAITING_REVIEW, SUBMISSION_STATUS.DONE].includes(submission.status),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  })), solvedExercises.length === 0 && __jsx(Link, {\n    href: \"/exercitii\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"d-flex align-items-center justify-content-center no-underline text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, __jsx(FontAwesomeIcon, {\n    icon: faPlus,\n    width: \"32\",\n    height: \"32\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }, \" Rezolv\\u0103 un exerci\\u021Biu \")))), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, \" Exerci\\u021Bii create \"), __jsx(\"div\", {\n    className: styles['exercises-wrapper'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, createdExercises.map((ex, index) => __jsx(ExercisePreview, {\n    key: ex._id,\n    exercise: ex,\n    href: `exercitii/${ex._id}`,\n    isPrivate: ex.private,\n    viewMode: isOwnProfile ? 'TEACHER' : 'STUDENT',\n    feedbackCount: 0,\n    isApproved: false,\n    readOnly: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  })), isOwnProfile && __jsx(Link, {\n    href: \"/exercitii/creeaza\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"d-flex align-items-center justify-content-center no-underline text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, __jsx(FontAwesomeIcon, {\n    icon: faPlus,\n    width: \"32\",\n    height: \"32\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, \" Creeaz\\u0103 un nou exerci\\u021Biu \")))));\n}\n\nfunction mapStateToProps(state) {\n  return {\n    currentUser: state.user\n  };\n}\n\nconst connector = connect(mapStateToProps);\nexport default connector(UserActivity);","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/components/user-profile/UserActivity/UserActivity.tsx"],"names":["faPlus","FontAwesomeIcon","Link","React","useEffect","useState","connect","ExercisePreview","PageContainer","ExerciseService","NoActivity","SUBMISSION_STATUS","styles","UserActivity","profileUser","currentUser","isOwnProfile","info","username","solvedExercises","setSolvedExercises","undefined","createdExercises","setCreatedExercises","getSolvedExercises","then","resp","catch","err","console","error","createdExercisesPromise","getCreatedExercises","getPublicCreatedExercises","length","map","submission","index","_id","exercise","feedbacks","filter","f","type","status","DONE","AWAITING_REVIEW","includes","ex","private","mapStateToProps","state","user","connector"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,mCAAvB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwC,aAAxC;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AAIA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAASC,iBAAT,QAAkC,6BAAlC;AACA,OAAOC,MAAP,MAAmB,4BAAnB;;AAMA,SAASC,YAAT,CAAsB;AAAEC,EAAAA,WAAF;AAAeC,EAAAA;AAAf,CAAtB,EAA8F;AAC5F,QAAMC,YAAY,GAAGD,WAAW,CAACE,IAAZ,IAAoBF,WAAW,CAACE,IAAZ,CAAiBC,QAAjB,KAA8BJ,WAAW,CAACI,QAAnF;AACA,QAAM;AAAA,OAACC,eAAD;AAAA,OAAkBC;AAAlB,MAAwCf,QAAQ,CAAegB,SAAf,CAAtD;AACA,QAAM;AAAA,OAACC,gBAAD;AAAA,OAAmBC;AAAnB,MAA0ClB,QAAQ,CAACgB,SAAD,CAAxD;AAEAjB,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,QAAIY,YAAJ,EAAkB;AAChBP,MAAAA,eAAe,CACZe,kBADH,GAEGC,IAFH,CAESC,IAAD,IAAUN,kBAAkB,CAACM,IAAD,CAFpC,EAGGC,KAHH,CAGUC,GAAD,IAASC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAHlB;AAID,KALD,MAKO;AACLR,MAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACD,KATa,CAWd;;;AACA,UAAMW,uBAAuB,GAAGf,YAAY,GACxCP,eAAe,CAACuB,mBAAhB,EADwC,GAExCvB,eAAe,CAACwB,yBAAhB,CAA0CnB,WAAW,CAACI,QAAtD,CAFJ;AAIAa,IAAAA,uBAAuB,CAACN,IAAxB,CAA8BC,IAAD,IAAU;AACrCH,MAAAA,mBAAmB,CAACG,IAAD,CAAnB;AACD,KAFD,EAEGC,KAFH,CAEUC,GAAD,IAAS;AAChBC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KAJD;AAKD,GArBQ,EAqBN,EArBM,CAAT;;AAuBA,MAAI,CAACN,gBAAD,IAAqB,CAACH,eAA1B,EAA2C;AACzC;AACA,WAAO,IAAP;AACD;;AAED,MAAIG,gBAAgB,CAACY,MAAjB,KAA4B,CAA5B,IAAiC,CAAClB,YAAtC,EAAoD;AAClD,WAAO,MAAC,UAAD;AAAY,MAAA,IAAI,EAAEF,WAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,SACE,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAKE;AAAK,IAAA,SAAS,EAAEF,MAAM,CAAC,mBAAD,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGO,eAAe,CAACgB,GAAhB,CAAoB,CAACC,UAAD,EAAyBC,KAAzB,KACnB,MAAC,eAAD;AACE,IAAA,GAAG,EAAED,UAAU,CAACE,GADlB;AAEE,IAAA,QAAQ,EAAEF,UAAU,CAACG,QAFvB;AAGE,IAAA,IAAI,EAAG,WAAUH,UAAU,CAACG,QAAX,CAAoBD,GAAI,EAH3C;AAIE,IAAA,QAAQ,EAAC,SAJX;AAKE,IAAA,aAAa,EAAEF,UAAU,CAACI,SAAX,CAAqBC,MAArB,CAA4BC,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW,aAA5C,EAA2DT,MAL5E;AAME,IAAA,UAAU,EAAEE,UAAU,CAACQ,MAAX,KAAsBjC,iBAAiB,CAACkC,IANtD;AAOE,IAAA,QAAQ,EAAE,CACRlC,iBAAiB,CAACmC,eADV,EAERnC,iBAAiB,CAACkC,IAFV,EAGRE,QAHQ,CAGCX,UAAU,CAACQ,MAHZ,CAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADH,EAeGzB,eAAe,CAACe,MAAhB,KAA2B,CAA3B,IACC,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,2EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAElC,MAAvB;AAA+B,IAAA,KAAK,EAAC,IAArC;AAA0C,IAAA,MAAM,EAAC,IAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAFF,CADF,CAhBJ,CALF,EA6BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7BF,EA8BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BA9BF,EA+BE;AAAK,IAAA,SAAS,EAAEY,MAAM,CAAC,mBAAD,CAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGU,gBAAgB,CAACa,GAAjB,CAAqB,CAACa,EAAD,EAAKX,KAAL,KACpB,MAAC,eAAD;AACE,IAAA,GAAG,EAAEW,EAAE,CAACV,GADV;AAEE,IAAA,QAAQ,EAAEU,EAFZ;AAGE,IAAA,IAAI,EAAG,aAAYA,EAAE,CAACV,GAAI,EAH5B;AAIE,IAAA,SAAS,EAAEU,EAAE,CAACC,OAJhB;AAKE,IAAA,QAAQ,EAAEjC,YAAY,GAAG,SAAH,GAAe,SALvC;AAME,IAAA,aAAa,EAAE,CANjB;AAOE,IAAA,UAAU,EAAE,KAPd;AAQE,IAAA,QAAQ,EAAE,KARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADH,EAaGA,YAAY,IACX,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,oBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,2EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEhB,MAAvB;AAA+B,IAAA,KAAK,EAAC,IAArC;AAA0C,IAAA,MAAM,EAAC,IAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAFF,CADF,CAdJ,CA/BF,CADF;AAyDD;;AAED,SAASkD,eAAT,CAAyBC,KAAzB,EAA2C;AACzC,SAAO;AACLpC,IAAAA,WAAW,EAAEoC,KAAK,CAACC;AADd,GAAP;AAGD;;AAED,MAAMC,SAAS,GAAG/C,OAAO,CAAC4C,eAAD,CAAzB;AAEA,eAAeG,SAAS,CAACxC,YAAD,CAAxB","sourcesContent":["import { faPlus } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport Link from 'next/link';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport ExercisePreview from '~/components/ExercisePreview';\r\nimport PageContainer from '~/components/PageContainer';\r\nimport { Submission } from '~/redux/exercise-submissions/types';\r\nimport { RootState } from '~/redux/root.reducer';\r\nimport { UserState } from '~/redux/user/types';\r\nimport ExerciseService from '~/services/Exercise.service';\r\nimport NoActivity from '../NoActivity/NoActivity';\r\nimport { SUBMISSION_STATUS } from '~/../shared/SharedConstants';\r\nimport styles from './UserActivity.module.scss';\r\n\r\ninterface Props {\r\n  profileUser: UserState['info']\r\n}\r\n\r\nfunction UserActivity({ profileUser, currentUser }: ConnectedProps<typeof connector> & Props) {\r\n  const isOwnProfile = currentUser.info && currentUser.info.username === profileUser.username;\r\n  const [solvedExercises, setSolvedExercises] = useState<Submission[]>(undefined);\r\n  const [createdExercises, setCreatedExercises] = useState(undefined);\r\n\r\n  useEffect(() => {\r\n    // Solved exercises\r\n    if (isOwnProfile) {\r\n      ExerciseService\r\n        .getSolvedExercises()\r\n        .then((resp) => setSolvedExercises(resp))\r\n        .catch((err) => console.error(err));\r\n    } else {\r\n      setSolvedExercises([]);\r\n    }\r\n\r\n    // Created exercises\r\n    const createdExercisesPromise = isOwnProfile\r\n      ? ExerciseService.getCreatedExercises()\r\n      : ExerciseService.getPublicCreatedExercises(profileUser.username);\r\n\r\n    createdExercisesPromise.then((resp) => {\r\n      setCreatedExercises(resp);\r\n    }).catch((err) => {\r\n      console.error(err);\r\n    });\r\n  }, []);\r\n\r\n  if (!createdExercises || !solvedExercises) {\r\n    // Loading\r\n    return null;\r\n  }\r\n\r\n  if (createdExercises.length === 0 && !isOwnProfile) {\r\n    return <NoActivity user={profileUser} />;\r\n  }\r\n\r\n  return (\r\n    <PageContainer>\r\n      <h2>\r\n        Exerciții rezolvate\r\n      </h2>\r\n      {}\r\n      <div className={styles['exercises-wrapper']}>\r\n        {solvedExercises.map((submission: Submission, index) => (\r\n          <ExercisePreview\r\n            key={submission._id}\r\n            exercise={submission.exercise}\r\n            href={`rezolva/${submission.exercise._id}`}\r\n            viewMode=\"STUDENT\"\r\n            feedbackCount={submission.feedbacks.filter(f => f.type === 'improvement').length}\r\n            isApproved={submission.status === SUBMISSION_STATUS.DONE}\r\n            readOnly={[\r\n              SUBMISSION_STATUS.AWAITING_REVIEW,\r\n              SUBMISSION_STATUS.DONE,\r\n            ].includes(submission.status)}\r\n          />\r\n        ))}\r\n        {solvedExercises.length === 0 && (\r\n          <Link href=\"/exercitii\">\r\n            <a className=\"d-flex align-items-center justify-content-center no-underline text-center\">\r\n              <FontAwesomeIcon icon={faPlus} width=\"32\" height=\"32\" />\r\n              <span> Rezolvă un exercițiu </span>\r\n            </a>\r\n          </Link>\r\n        )}\r\n      </div>\r\n      <hr />\r\n      <h2> Exerciții create </h2>\r\n      <div className={styles['exercises-wrapper']}>\r\n        {createdExercises.map((ex, index) => (\r\n          <ExercisePreview\r\n            key={ex._id}\r\n            exercise={ex}\r\n            href={`exercitii/${ex._id}`}\r\n            isPrivate={ex.private}\r\n            viewMode={isOwnProfile ? 'TEACHER' : 'STUDENT'}\r\n            feedbackCount={0}\r\n            isApproved={false}\r\n            readOnly={false}\r\n          />\r\n        ))}\r\n        {isOwnProfile && (\r\n          <Link href=\"/exercitii/creeaza\">\r\n            <a className=\"d-flex align-items-center justify-content-center no-underline text-center\">\r\n              <FontAwesomeIcon icon={faPlus} width=\"32\" height=\"32\" />\r\n              <span> Creează un nou exercițiu </span>\r\n            </a>\r\n          </Link>\r\n        )}\r\n\r\n      </div>\r\n    </PageContainer>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: RootState) {\r\n  return {\r\n    currentUser: state.user,\r\n  };\r\n}\r\n\r\nconst connector = connect(mapStateToProps);\r\n\r\nexport default connector(UserActivity);\r\n"]},"metadata":{},"sourceType":"module"}