{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable @typescript-eslint/no-var-requires */\nconst mongoose = require('mongoose');\n\nconst {\n  validateObjectId\n} = require('../server/ServerUtils');\n\nconst {\n  sanitize: userSanitize\n} = require('./user.shared-model');\n\nconst ExercisesSchema = new mongoose.Schema({\n  user: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'User'\n  },\n  type: {\n    type: String,\n    enum: ['html', 'css', 'js']\n  },\n  tags: [{\n    type: String\n  }],\n  body: {\n    type: String,\n    required: true\n  },\n  example: {\n    type: String\n  },\n  solution: {\n    type: String,\n    required: true\n  },\n  private: {\n    type: Boolean,\n    default: false\n  },\n  suggestion: {\n    type: String,\n    required: false\n  }\n}, {\n  timestamps: true\n});\nconst Exercise = mongoose.models.Exercise || mongoose.model('Exercise', ExercisesSchema);\n\nfunction getById(_id) {\n  validateObjectId(_id);\n  return Exercise.findById(_id).populate('user');\n}\n\nfunction sanitize(exercise) {\n  const sanitizedExercise = _objectSpread({}, exercise.toObject());\n\n  const propsToDelete = ['__v', 'updatedAt', 'createdAt'];\n  propsToDelete.forEach(prop => delete sanitizedExercise[prop]);\n  sanitizedExercise.user = userSanitize(exercise.user);\n  return JSON.parse(JSON.stringify(sanitizedExercise));\n}\n\nmodule.exports = {\n  Exercise,\n  ExercisesSchema,\n  getById,\n  sanitize\n};","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/shared/exercise.shared-model.js"],"names":["mongoose","require","validateObjectId","sanitize","userSanitize","ExercisesSchema","Schema","user","type","Types","ObjectId","ref","String","enum","tags","body","required","example","solution","private","Boolean","default","suggestion","timestamps","Exercise","models","model","getById","_id","findById","populate","exercise","sanitizedExercise","toObject","propsToDelete","forEach","prop","JSON","parse","stringify","module","exports"],"mappings":";;;;;;AAAA;AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAuBD,OAAO,CAAC,uBAAD,CAApC;;AACA,MAAM;AAAEE,EAAAA,QAAQ,EAAEC;AAAZ,IAA6BH,OAAO,CAAC,qBAAD,CAA1C;;AAEA,MAAMI,eAAe,GAAG,IAAIL,QAAQ,CAACM,MAAb,CACtB;AACEC,EAAAA,IAAI,EAAE;AAAEC,IAAAA,IAAI,EAAER,QAAQ,CAACM,MAAT,CAAgBG,KAAhB,CAAsBC,QAA9B;AAAwCC,IAAAA,GAAG,EAAE;AAA7C,GADR;AAEEH,EAAAA,IAAI,EAAE;AAAEA,IAAAA,IAAI,EAAEI,MAAR;AAAgBC,IAAAA,IAAI,EAAE,CAAC,MAAD,EAAS,KAAT,EAAgB,IAAhB;AAAtB,GAFR;AAGEC,EAAAA,IAAI,EAAE,CAAC;AAAEN,IAAAA,IAAI,EAAEI;AAAR,GAAD,CAHR;AAIEG,EAAAA,IAAI,EAAE;AAAEP,IAAAA,IAAI,EAAEI,MAAR;AAAgBI,IAAAA,QAAQ,EAAE;AAA1B,GAJR;AAKEC,EAAAA,OAAO,EAAE;AAAET,IAAAA,IAAI,EAAEI;AAAR,GALX;AAMEM,EAAAA,QAAQ,EAAE;AAAEV,IAAAA,IAAI,EAAEI,MAAR;AAAgBI,IAAAA,QAAQ,EAAE;AAA1B,GANZ;AAOEG,EAAAA,OAAO,EAAE;AAAEX,IAAAA,IAAI,EAAEY,OAAR;AAAiBC,IAAAA,OAAO,EAAE;AAA1B,GAPX;AAQEC,EAAAA,UAAU,EAAE;AAAEd,IAAAA,IAAI,EAAEI,MAAR;AAAgBI,IAAAA,QAAQ,EAAE;AAA1B;AARd,CADsB,EAWtB;AACEO,EAAAA,UAAU,EAAE;AADd,CAXsB,CAAxB;AAgBA,MAAMC,QAAQ,GAAGxB,QAAQ,CAACyB,MAAT,CAAgBD,QAAhB,IAA4BxB,QAAQ,CAAC0B,KAAT,CAAe,UAAf,EAA2BrB,eAA3B,CAA7C;;AAEA,SAASsB,OAAT,CAAiBC,GAAjB,EAAsB;AACpB1B,EAAAA,gBAAgB,CAAC0B,GAAD,CAAhB;AACA,SAAOJ,QAAQ,CAACK,QAAT,CAAkBD,GAAlB,EAAuBE,QAAvB,CAAgC,MAAhC,CAAP;AACD;;AAED,SAAS3B,QAAT,CAAkB4B,QAAlB,EAA4B;AAC1B,QAAMC,iBAAiB,qBAAQD,QAAQ,CAACE,QAAT,EAAR,CAAvB;;AACA,QAAMC,aAAa,GAAG,CAAC,KAAD,EAAQ,WAAR,EAAqB,WAArB,CAAtB;AAEAA,EAAAA,aAAa,CAACC,OAAd,CAAuBC,IAAD,IAAU,OAAOJ,iBAAiB,CAACI,IAAD,CAAxD;AAEAJ,EAAAA,iBAAiB,CAACzB,IAAlB,GAAyBH,YAAY,CAAC2B,QAAQ,CAACxB,IAAV,CAArC;AAEA,SAAO8B,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeP,iBAAf,CAAX,CAAP;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiB;AACfjB,EAAAA,QADe;AAEfnB,EAAAA,eAFe;AAGfsB,EAAAA,OAHe;AAIfxB,EAAAA;AAJe,CAAjB","sourcesContent":["/* eslint-disable @typescript-eslint/no-var-requires */\r\nconst mongoose = require('mongoose');\r\nconst { validateObjectId } = require('../server/ServerUtils');\r\nconst { sanitize: userSanitize } = require('./user.shared-model');\r\n\r\nconst ExercisesSchema = new mongoose.Schema(\r\n  {\r\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\r\n    type: { type: String, enum: ['html', 'css', 'js'] },\r\n    tags: [{ type: String }],\r\n    body: { type: String, required: true },\r\n    example: { type: String },\r\n    solution: { type: String, required: true },\r\n    private: { type: Boolean, default: false },\r\n    suggestion: { type: String, required: false },\r\n  },\r\n  {\r\n    timestamps: true,\r\n  },\r\n);\r\n\r\nconst Exercise = mongoose.models.Exercise || mongoose.model('Exercise', ExercisesSchema);\r\n\r\nfunction getById(_id) {\r\n  validateObjectId(_id);\r\n  return Exercise.findById(_id).populate('user');\r\n}\r\n\r\nfunction sanitize(exercise) {\r\n  const sanitizedExercise = { ...exercise.toObject() };\r\n  const propsToDelete = ['__v', 'updatedAt', 'createdAt'];\r\n\r\n  propsToDelete.forEach((prop) => delete sanitizedExercise[prop]);\r\n\r\n  sanitizedExercise.user = userSanitize(exercise.user);\r\n\r\n  return JSON.parse(JSON.stringify(sanitizedExercise));\r\n}\r\n\r\nmodule.exports = {\r\n  Exercise,\r\n  ExercisesSchema,\r\n  getById,\r\n  sanitize,\r\n};\r\n"]},"metadata":{},"sourceType":"script"}