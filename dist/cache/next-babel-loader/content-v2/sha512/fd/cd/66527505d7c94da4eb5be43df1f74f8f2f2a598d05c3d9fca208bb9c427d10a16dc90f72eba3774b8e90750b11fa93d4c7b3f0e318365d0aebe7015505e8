{"ast":null,"code":"import _classCallCheck from \"C:/Users/didi/Desktop/frontend.ro/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/didi/Desktop/frontend.ro/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"C:/Users/didi/Desktop/frontend.ro/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\didi\\\\Desktop\\\\frontend.ro\\\\client\\\\components\\\\Editor\\\\BasicEditor\\\\BasicEditor.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport * as Monaco from '../monaco';\nimport FileIcons from '~/services/utils/FileIcons';\nimport InitForm from '../InitForm/InitForm';\nimport FileSwitcher from '../FileSwitcher/FileSwitcher';\nimport styles from '../Editor.module.scss';\n\n// extends MonacoBase\nvar BasicMonacoEditor = /*#__PURE__*/function () {\n  function BasicMonacoEditor() {\n    var _this = this;\n\n    _classCallCheck(this, BasicMonacoEditor);\n\n    _defineProperty(this, \"initEditor\", function () {\n      var readOnly = _this.props.readOnly;\n      var _this$state = _this.state,\n          folderStructure = _this$state.folderStructure,\n          selectedFileKey = _this$state.selectedFileKey;\n\n      if (!folderStructure.files.length && !folderStructure.folders.length) {\n        return;\n      }\n\n      var _folderStructure$getF = folderStructure.getFile(selectedFileKey),\n          file = _folderStructure$getF.file;\n\n      _this.editor = Monaco.create(_this.editorRef.current, {\n        readOnly: readOnly,\n        value: file ? file.content : '',\n        scrollBeyondLastLine: false\n      });\n\n      if (file) {\n        _this.onFileSelect(file.key);\n\n        _this.updateLanguageBasedOnFileName(file.name);\n      }\n    });\n\n    _defineProperty(this, \"onModelChange\", function () {\n      var folderStructure = _this.state.folderStructure;\n      var onChange = _this.props.onChange;\n      folderStructure.setContent(_this.state.selectedFileKey, _this.editor.getValue());\n\n      if (onChange) {\n        onChange(folderStructure);\n      }\n\n      _this.setState({\n        folderStructure: folderStructure\n      });\n    });\n  }\n\n  _createClass(BasicMonacoEditor, [{\n    key: \"componentDidMount\",\n    // constructor(props) {\n    //   super(props);\n    //   this.state = {\n    //     folderStructure: new FolderStructure(props.folderStructure),\n    //   };\n    // }\n    value: function componentDidMount() {\n      this.initEditor();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var readOnly = this.props.readOnly;\n      var _this$state2 = this.state,\n          folderStructure = _this$state2.folderStructure,\n          fileSwitcherWidth = _this$state2.fileSwitcherWidth,\n          selectedFileKey = _this$state2.selectedFileKey,\n          isDropable = _this$state2.isDropable;\n      var selectedFile = folderStructure.getFile(selectedFileKey).file;\n      return __jsx(\"div\", {\n        className: \"\\n        \".concat(styles['editor-wrapper'], \"\\n        \").concat(isDropable ? styles['is--dropable'] : '', \"\\n      \"),\n        onDragEnter: this.onDragEnter,\n        onDragLeave: this.onDragLeave,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }\n      }, folderStructure.files.length || folderStructure.folders.length ? __jsx(React.Fragment, null, __jsx(FileSwitcher, {\n        maxHeight: 500,\n        folderStructure: folderStructure,\n        selectedFileKey: selectedFileKey,\n        readOnly: readOnly,\n        onFileAdd: this.onFileAdd,\n        onFolderAdd: this.onFolderAdd,\n        onSelect: this.onFileSelect,\n        onFileRename: this.onFileRename,\n        onFolderRename: this.onFolderRename,\n        onFileDelete: this.onFileDelete,\n        onFolderDelete: this.onFolderDelete,\n        onDownload: this.onDownload,\n        onResize: this.onResize,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }\n      }), __jsx(\"div\", {\n        className: \"\\n                \".concat(styles.editor, \"\\n                \").concat(selectedFileKey ? '' : styles['has--no-selected-file'], \"\\n              \"),\n        style: {\n          width: \"calc(100% - \".concat(fileSwitcherWidth, \"px)\"),\n          maxWidth: \"calc(100% - \".concat(fileSwitcherWidth, \"px)\")\n        },\n        ref: this.editorRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }), selectedFile && __jsx(\"p\", {\n        className: \"\".concat(styles['selected-file'], \" d-flex justify-content-center align-items-center\"),\n        title: selectedFile.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }\n      }, __jsx(\"img\", {\n        width: \"20\",\n        src: FileIcons.getIconUrl(selectedFile.name),\n        alt: \"icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }), __jsx(\"span\", {\n        className: \"ellipsis-overflow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }, selectedFile.name)), __jsx(\"label\", {\n        className: \"upload-label pin-full d-flex justify-content-center align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      }, __jsx(\"span\", {\n        className: \"icon-check mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }), \"Drop to replace\"), __jsx(\"input\", {\n        className: \"pin-full\",\n        type: \"file\",\n        multiple: true,\n        onChange: this.onReplace,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }\n      }))) : __jsx(InitForm, {\n        createFirstFile: this.createFirstFile,\n        uploadStructure: this.uploadStructure,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }\n      }));\n    }\n  }]);\n\n  return BasicMonacoEditor;\n}();\n\nexport default BasicMonacoEditor;","map":{"version":3,"sources":["C:/Users/didi/Desktop/frontend.ro/client/components/Editor/BasicEditor/BasicEditor.tsx"],"names":["React","Monaco","FileIcons","InitForm","FileSwitcher","styles","BasicMonacoEditor","readOnly","props","state","folderStructure","selectedFileKey","files","length","folders","getFile","file","editor","create","editorRef","current","value","content","scrollBeyondLastLine","onFileSelect","key","updateLanguageBasedOnFileName","name","onChange","setContent","getValue","setState","initEditor","fileSwitcherWidth","isDropable","selectedFile","onDragEnter","onDragLeave","onFileAdd","onFolderAdd","onFileRename","onFolderRename","onFileDelete","onFolderDelete","onDownload","onResize","width","maxWidth","getIconUrl","onReplace","createFirstFile","uploadStructure"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport * as Monaco from '../monaco';\r\nimport FileIcons from '~/services/utils/FileIcons';\r\nimport InitForm from '../InitForm/InitForm';\r\nimport FolderStructure from '~/services/utils/FolderStructure';\r\nimport MonacoBase from '../Monaco.base';\r\nimport FileSwitcher from '../FileSwitcher/FileSwitcher';\r\n\r\nimport styles from '../Editor.module.scss';\r\n\r\ninterface Props extends MonacoBase {\r\n  onChange: (folderStructure?: FolderStructure) => void & any\r\n}\r\n\r\n// extends MonacoBase\r\nclass BasicMonacoEditor implements Props {\r\n  // constructor(props) {\r\n  //   super(props);\r\n\r\n  //   this.state = {\r\n  //     folderStructure: new FolderStructure(props.folderStructure),\r\n  //   };\r\n  // }\r\n\r\n  componentDidMount() {\r\n    this.initEditor();\r\n  }\r\n\r\n  initEditor = () => {\r\n    const { readOnly } = this.props;\r\n    const { folderStructure, selectedFileKey } = this.state;\r\n\r\n    if (!folderStructure.files.length && !folderStructure.folders.length) {\r\n      return;\r\n    }\r\n\r\n    let { file } = folderStructure.getFile(selectedFileKey);\r\n\r\n    this.editor = Monaco.create(this.editorRef.current, {\r\n      readOnly,\r\n      value: file ? file.content : '',\r\n      scrollBeyondLastLine: false,\r\n    });\r\n\r\n    if (file) {\r\n      this.onFileSelect(file.key);\r\n      this.updateLanguageBasedOnFileName(file.name);\r\n    }\r\n  }\r\n\r\n  onModelChange = () => {\r\n    const { folderStructure } = this.state;\r\n    const { onChange } = this.props;\r\n\r\n    folderStructure.setContent(this.state.selectedFileKey, this.editor.getValue());\r\n\r\n    if (onChange) {\r\n      onChange(folderStructure);\r\n    }\r\n\r\n    this.setState({ folderStructure });\r\n  }\r\n\r\n  render() {\r\n    const { readOnly } = this.props;\r\n    const {\r\n      folderStructure, fileSwitcherWidth, selectedFileKey, isDropable,\r\n    } = this.state;\r\n    const selectedFile = folderStructure.getFile(selectedFileKey).file;\r\n\r\n    return (\r\n      <div\r\n        className={`\r\n        ${styles['editor-wrapper']}\r\n        ${isDropable ? styles['is--dropable'] : ''}\r\n      `}\r\n        onDragEnter={this.onDragEnter}\r\n        onDragLeave={this.onDragLeave}\r\n      >\r\n        {folderStructure.files.length || folderStructure.folders.length ? (\r\n          <>\r\n            <FileSwitcher\r\n              maxHeight={500}\r\n              folderStructure={folderStructure}\r\n              selectedFileKey={selectedFileKey}\r\n              readOnly={readOnly}\r\n              onFileAdd={this.onFileAdd}\r\n              onFolderAdd={this.onFolderAdd}\r\n              onSelect={this.onFileSelect}\r\n              onFileRename={this.onFileRename}\r\n              onFolderRename={this.onFolderRename}\r\n              onFileDelete={this.onFileDelete}\r\n              onFolderDelete={this.onFolderDelete}\r\n              onDownload={this.onDownload}\r\n              onResize={this.onResize}\r\n            />\r\n            <div\r\n              className={`\r\n                ${styles.editor}\r\n                ${selectedFileKey ? '' : styles['has--no-selected-file']}\r\n              `}\r\n              style={{\r\n                width: `calc(100% - ${fileSwitcherWidth}px)`,\r\n                maxWidth: `calc(100% - ${fileSwitcherWidth}px)`,\r\n              }}\r\n              ref={this.editorRef}\r\n            />\r\n            {selectedFile && (\r\n              <p className={`${styles['selected-file']} d-flex justify-content-center align-items-center`} title={selectedFile.name}>\r\n                <img width=\"20\" src={FileIcons.getIconUrl(selectedFile.name)} alt=\"icon\" />\r\n                <span className=\"ellipsis-overflow\">{selectedFile.name}</span>\r\n              </p>\r\n            )}\r\n            <label className=\"upload-label pin-full d-flex justify-content-center align-items-center\">\r\n              <p>\r\n                <span className=\"icon-check mr-2\" />\r\n                Drop to replace\r\n              </p>\r\n              <input className=\"pin-full\" type=\"file\" multiple onChange={this.onReplace} />\r\n            </label>\r\n          </>\r\n        ) : (\r\n          <InitForm createFirstFile={this.createFirstFile} uploadStructure={this.uploadStructure} />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default BasicMonacoEditor;\r\n"]},"metadata":{},"sourceType":"module"}