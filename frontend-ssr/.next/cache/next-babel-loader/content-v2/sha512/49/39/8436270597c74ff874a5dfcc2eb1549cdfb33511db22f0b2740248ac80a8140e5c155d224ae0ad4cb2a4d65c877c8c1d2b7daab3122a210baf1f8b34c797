{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable no-restricted-globals */\nexport let LogEventType;\n\n(function (LogEventType) {\n  LogEventType[\"ROUTE\"] = \"ROUTE\";\n  LogEventType[\"END\"] = \"END\";\n})(LogEventType || (LogEventType = {}));\n\nclass ClientMonitoring {}\n\n_defineProperty(ClientMonitoring, \"endpoint\", 'https://frontendro-default-rtdb.firebaseio.com/logs.json');\n\n_defineProperty(ClientMonitoring, \"log\", type => {\n  const log = {\n    type,\n    url: location.pathname,\n    timestamp: new Date().toString()\n  };\n  return fetch(ClientMonitoring.endpoint, {\n    method: 'POST',\n    body: JSON.stringify(log),\n    headers: new Headers({\n      'Content-Type': 'application/json'\n    })\n  }).catch(err => {\n    console.error('[ClientMonitoring.log]', err);\n  });\n});\n\n_defineProperty(ClientMonitoring, \"destroy\", () => {\n  const log = {\n    type: LogEventType.END,\n    url: location.pathname,\n    timestamp: new Date().toString()\n  };\n  navigator.sendBeacon(ClientMonitoring.endpoint, JSON.stringify(log));\n});\n\nexport default ClientMonitoring;","map":{"version":3,"sources":["/Users/nmaties/Projects/personal/frontend.ro/frontend-ssr/services/ClientMonitoring.ts"],"names":["LogEventType","ClientMonitoring","type","log","url","location","pathname","timestamp","Date","toString","fetch","endpoint","method","body","JSON","stringify","headers","Headers","catch","err","console","error","END","navigator","sendBeacon"],"mappings":";;AAAA;AACA,WAAYA,YAAZ;;WAAYA,Y;AAAAA,EAAAA,Y;AAAAA,EAAAA,Y;GAAAA,Y,KAAAA,Y;;AAWZ,MAAMC,gBAAN,CAAuB;;gBAAjBA,gB,cACsB,0D;;gBADtBA,gB,SAGiBC,IAAD,IAAwB;AAC1C,QAAMC,GAAS,GAAG;AAChBD,IAAAA,IADgB;AAEhBE,IAAAA,GAAG,EAAEC,QAAQ,CAACC,QAFE;AAGhBC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,QAAX;AAHK,GAAlB;AAMA,SAAOC,KAAK,CAACT,gBAAgB,CAACU,QAAlB,EAA4B;AACtCC,IAAAA,MAAM,EAAE,MAD8B;AAEtCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeZ,GAAf,CAFgC;AAGtCa,IAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnB,sBAAgB;AADG,KAAZ;AAH6B,GAA5B,CAAL,CAOJC,KAPI,CAOGC,GAAD,IAAS;AACdC,IAAAA,OAAO,CAACC,KAAR,CAAc,wBAAd,EAAwCF,GAAxC;AACD,GATI,CAAP;AAUD,C;;gBApBGlB,gB,aAsBoB,MAAM;AAC5B,QAAME,GAAS,GAAG;AAChBD,IAAAA,IAAI,EAAEF,YAAY,CAACsB,GADH;AAEhBlB,IAAAA,GAAG,EAAEC,QAAQ,CAACC,QAFE;AAGhBC,IAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,QAAX;AAHK,GAAlB;AAMAc,EAAAA,SAAS,CAACC,UAAV,CAAqBvB,gBAAgB,CAACU,QAAtC,EAAgDG,IAAI,CAACC,SAAL,CAAeZ,GAAf,CAAhD;AACD,C;;AAGH,eAAeF,gBAAf","sourcesContent":["/* eslint-disable no-restricted-globals */\nexport enum LogEventType {\n  ROUTE = 'ROUTE',\n  END = 'END',\n}\n\ninterface Log {\n  url: string;\n  type: LogEventType;\n  timestamp: string;\n}\n\nclass ClientMonitoring {\n  private static endpoint = 'https://frontendro-default-rtdb.firebaseio.com/logs.json'\n\n  public static log = (type: LogEventType) => {\n    const log : Log = {\n      type,\n      url: location.pathname,\n      timestamp: new Date().toString(),\n    };\n\n    return fetch(ClientMonitoring.endpoint, {\n      method: 'POST',\n      body: JSON.stringify(log),\n      headers: new Headers({\n        'Content-Type': 'application/json',\n      }),\n    })\n      .catch((err) => {\n        console.error('[ClientMonitoring.log]', err);\n      });\n  }\n\n  public static destroy = () => {\n    const log : Log = {\n      type: LogEventType.END,\n      url: location.pathname,\n      timestamp: new Date().toString(),\n    };\n\n    navigator.sendBeacon(ClientMonitoring.endpoint, JSON.stringify(log));\n  }\n}\n\nexport default ClientMonitoring;\n"]},"metadata":{},"sourceType":"module"}