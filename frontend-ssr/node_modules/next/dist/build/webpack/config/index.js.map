{"version":3,"sources":["../../../../build/webpack/config/index.ts"],"names":["build","config","rootDirectory","customAppFile","isDevelopment","isServer","assetPrefix","sassOptions","productionBrowserSourceMaps","ctx","isProduction","isClient","endsWith","slice","fn"],"mappings":"yDACA,mCACA,iCACA,8BAEO,cAAeA,CAAAA,KAAf,CACLC,MADK,CAEL,CACEC,aADF,CAEEC,aAFF,CAGEC,aAHF,CAIEC,QAJF,CAKEC,WALF,CAMEC,WANF,CAOEC,2BAPF,CAFK,CAmB2B,CAChC,KAAMC,CAAAA,GAAyB,CAAG,CAChCP,aADgC,CAEhCC,aAFgC,CAGhCC,aAHgC,CAIhCM,YAAY,CAAE,CAACN,aAJiB,CAKhCC,QALgC,CAMhCM,QAAQ,CAAE,CAACN,QANqB,CAOhCC,WAAW,CAAEA,WAAW,CACpBA,WAAW,CAACM,QAAZ,CAAqB,GAArB,EACEN,WAAW,CAACO,KAAZ,CAAkB,CAAlB,CAAqB,CAAC,CAAtB,CADF,CAEEP,WAHkB,CAIpB,EAX4B,CAYhCC,WAZgC,CAahCC,2BAbgC,CAAlC,CAgBA,KAAMM,CAAAA,EAAE,CAAG,gBAAK,eAAKL,GAAL,CAAL,CAAgB,aAAIA,GAAJ,CAAhB,CAAX,CACA,MAAOK,CAAAA,EAAE,CAACb,MAAD,CAAT,CACD","sourcesContent":["import webpack from 'webpack'\nimport { base } from './blocks/base'\nimport { css } from './blocks/css'\nimport { ConfigurationContext, pipe } from './utils'\n\nexport async function build(\n  config: webpack.Configuration,\n  {\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isServer,\n    assetPrefix,\n    sassOptions,\n    productionBrowserSourceMaps,\n  }: {\n    rootDirectory: string\n    customAppFile: string | null\n    isDevelopment: boolean\n    isServer: boolean\n    assetPrefix: string\n    sassOptions: any\n    productionBrowserSourceMaps: boolean\n  }\n): Promise<webpack.Configuration> {\n  const ctx: ConfigurationContext = {\n    rootDirectory,\n    customAppFile,\n    isDevelopment,\n    isProduction: !isDevelopment,\n    isServer,\n    isClient: !isServer,\n    assetPrefix: assetPrefix\n      ? assetPrefix.endsWith('/')\n        ? assetPrefix.slice(0, -1)\n        : assetPrefix\n      : '',\n    sassOptions,\n    productionBrowserSourceMaps,\n  }\n\n  const fn = pipe(base(ctx), css(ctx))\n  return fn(config)\n}\n"]}